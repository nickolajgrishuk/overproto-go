# Примеры использования OverProto

Этот каталог содержит примеры использования библиотеки OverProto.

## Примеры

### TCP клиент и сервер

#### Запуск TCP сервера

```bash
cd examples/tcp-server
go run main.go -port 8080
```

#### Запуск TCP клиента

```bash
cd examples/tcp-client
go run main.go -host 127.0.0.1 -port 8080
```

Клиент будет отправлять сообщения каждые 2 секунды, сервер будет отвечать эхо-сообщениями.

### UDP клиент и сервер

#### Запуск UDP сервера

```bash
cd examples/udp-server
go run main.go -port 8080
```

#### Запуск UDP клиента

```bash
# С надёжной доставкой (по умолчанию)
cd examples/udp-client
go run main.go -host 127.0.0.1 -port 8080 -reliable=true

# Без надёжной доставки
go run main.go -host 127.0.0.1 -port 8080 -reliable=false
```

### Шифрование

Пример демонстрирует использование AES-256-GCM шифрования.

#### Запуск зашифрованного сервера

```bash
cd examples/encrypted
go run main.go -mode server -port 8080
```

#### Запуск зашифрованного клиента

```bash
cd examples/encrypted
go run main.go -mode client -host 127.0.0.1 -port 8080
```

Все данные будут автоматически зашифрованы и расшифрованы.

## Сборка примеров

Для сборки всех примеров:

```bash
go build ./examples/...
```

Или для конкретного примера:

```bash
cd examples/tcp-client
go build -o tcp-client .
```

## Тестирование

Для тестирования взаимодействия между клиентом и сервером:

1. Запустите сервер в одном терминале
2. Запустите клиент в другом терминале
3. Наблюдайте за обменом сообщениями

## Параметры командной строки

Все примеры поддерживают следующие параметры:

- `-host` - адрес сервера (по умолчанию: 127.0.0.1)
- `-port` - порт сервера (по умолчанию: 8080)
- `-reliable` - использовать надёжную доставку для UDP (по умолчанию: true)
- `-mode` - режим работы для encrypted примера (client или server)

## Примечания

- Все примеры используют graceful shutdown при получении SIGINT или SIGTERM
- TCP примеры демонстрируют state machine для приёма пакетов
- UDP примеры показывают работу с надёжной и ненадёжной доставкой
- Encrypted пример демонстрирует автоматическое шифрование/дешифрование

